<html>
  <head>
    <title>web components test</title>
    <script src="https://unpkg.com/vue@2.6.0/dist/vue.js"></script>
    <script src="./vue2-web-component/dist/vue2-weather-consumer.umd.min.js" defer></script>
  </head>
  <body>
    <template id="provider-template">
      <style>
        :host {
          display: block;
          border: 1px solid blue;
          border-radius: 5px;
          box-sizing: border-box;
          width: 300px;
          text-align: center;
          padding: 50px;
          line-height: 30px;
        }
      </style>
      <h1 style="color: #ddd;">&lt;weather-provider/&gt;</h1>
      <p>loading...</p>
    </template>
    <script src="./src/WeatherProvider.js" defer></script>

    <div style="display: flex; flex-direction: row; gap: 20px;">
      <weather-provider id="provider" my-title="天气预报总数"></weather-provider>
      <div>
        <vue2-weather-consumer
          id="consumer1"
          city=""
          temperature=""
        />
      </div>
    </div>

    <script type="text/javascript">
      window.addEventListener('DOMContentLoaded', () => {
        const $provider = document.getElementById('provider');
        const $consumer1 = document.getElementById('consumer1');
        $provider.addEventListener('weather-fetched', (e) => {
          const arr = e.detail;
          $consumer1.setAttribute('city', arr[0].label);
          $consumer1.setAttribute('temperature', arr[0].value);
        });
      });
    </script>
  </body>
</html>

